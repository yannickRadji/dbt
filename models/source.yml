version: 2

sources:
  - name: region1_raw
    description: >
      Raw data schema for Region 1 materialized in the national database.
      Data is extracted from the public schema of the region1_db and stored here for consistency and to allow future updates.
    database: national_db
    schema: region1_raw
    tables:
      - name: patients
        description: "Patient details for Region 1."
      - name: analyses
        description: "Blood analysis results for Region 1."
      - name: delivrances
        description: "Blood deliverances data for Region 1."

  - name: region2_raw
    description: >
      Raw data schema for Region 2 materialized in the national database.
      Data is extracted from the public schema of the region2_db and stored here for consistency and to allow future updates.
    database: national_db
    schema: region2_raw
    tables:
      - name: patients
        description: "Patient details for Region 2."
      - name: analyses
        description: "Blood analysis results for Region 2."
      - name: delivrances
        description: "Blood deliverances data for Region 2."

  - name: national_convergence
    description: >
      The target schema where transformed and converged data from Region 1 and Region 2
      is stored after the DBT pipeline.
    database: national_db
    schema: convergence
    tables:
      - name: patients
        description: "Unified patient data across regions."
      - name: analyses
        description: "Unified blood analysis results across regions."
      - name: delivrances
        description: "Unified blood deliverance records across regions."
      - name: mapping_blood_types
        description: "table de pour que les m√©tiers puisse mettre leur valeurs de transcodage"
